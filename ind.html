<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Para Abi üíú</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pacifico&family=Quicksand:wght@400;600;700&family=Dosis:wght@400;700&display=swap');

        /* --- Estilos Generales --- */
        * {
            -webkit-tap-highlight-color: transparent;
            box-sizing: border-box;
        }

        body {
            font-family: 'Quicksand', sans-serif;
            overflow: hidden;
            user-select: none;
            -webkit-user-select: none;
            touch-action: manipulation;
        }

        .title-font { font-family: 'Pacifico', cursive; }
        
        /* Animaciones base */
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        .floating { animation: float 3s ease-in-out infinite; }
        
        #btnNo { transition: top 0.2s ease, left 0.2s ease; position: relative; }
        
        .hidden-page { display: none; opacity: 0; transition: opacity 1s ease-in-out; }
        .visible-page { display: flex; opacity: 1; }
        
        /* --- CORRECCI√ìN LISTA Y VISTAS --- */
        .hidden-content { display: none !important; }
        .fade-in { animation: fadeIn 0.4s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

        /* --- ESTILOS DEL TOCADISCOS --- */
        :root {
            --color-bg: #f7f7f7;
            --color-player: #f4f3f2;
            --color-player-dark: #e0e0e0;
            --color-record: #363636;
            --color-label: #a855f7; 
            --color-arm: #ededed;
        }

        .player-wrapper {
            position: relative;
            width: 300px; 
            height: 300px;
            margin: 0 auto;
            transform-origin: center;
            flex-shrink: 0; 
            aspect-ratio: 1 / 1; 
        }

        .turntable {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background-color: var(--color-player);
            background-image: repeating-linear-gradient(90deg, transparent, transparent 1px, rgba(0,0,0,0.02) 1px, rgba(0,0,0,0.02) 3px);
            border-radius: 40px;
            box-shadow: 
                inset rgba(255,255,255,1) 0 0 2px 1px,
                inset rgba(0,0,0,0.06) 0 0 40px,
                rgba(0,0,0,0.2) 0 15px 30px -10px;
            z-index: 1;
        }

        .record {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 68%; height: 68%;
            border-radius: 50%;
            background: conic-gradient(from 90deg, #222, #333, #222, #333, #222);
            box-shadow: inset rgba(0,0,0,0.5) 0 0 0 2px, inset rgba(255,255,255,0.1) 0 0 0 4px;
            z-index: 2;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .spinning { animation: spin 4s linear infinite; }

        .record::before {
            content: '';
            position: absolute;
            width: 90%; height: 90%;
            border-radius: 50%;
            background: repeating-radial-gradient(#333, #333 4px, #2a2a2a 5px, #2a2a2a 6px);
        }

        .label {
            position: absolute;
            width: 38%; height: 38%;
            background-color: var(--color-label);
            border-radius: 50%;
            z-index: 3;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            color: white;
            font-family: 'Dosis', sans-serif;
            box-shadow: inset rgba(0,0,0,0.2) 0 0 10px;
        }
        
        .label h2 { font-size: 9px; letter-spacing: 1px; margin: 0; text-transform: uppercase; opacity: 0.9; }
        .label h3 { font-size: 13px; font-weight: bold; margin: 0; line-height: 1.2; }

        .spindle {
            position: absolute;
            width: 12px; height: 12px;
            background: #e2e2e2;
            border-radius: 50%;
            z-index: 4;
            box-shadow: inset rgba(0,0,0,0.2) 1px 1px 2px;
        }

        .arm-container {
            position: absolute;
            top: 20px; right: 20px;
            width: 40px; height: 180px;
            z-index: 10;
        }

        .arm-pivot {
            position: absolute;
            top: 0; right: 0;
            width: 40px; height: 40px;
            background: #ddd;
            border-radius: 50%;
            box-shadow: inset rgba(255,255,255,0.8) 0 1px 2px, 0 4px 6px rgba(0,0,0,0.2);
            z-index: 5;
        }

        .arm {
            position: absolute;
            top: 20px; right: 15px;
            width: 10px; height: 140px;
            background: #e0e0e0;
            border-radius: 5px;
            transform-origin: top center;
            transform: rotate(-35deg);
            transition: transform 1s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.5s ease;
            box-shadow: 4px 4px 8px rgba(0,0,0,0.3);
            z-index: 4;
        }

        .arm-head {
            position: absolute;
            bottom: -5px; left: -8px;
            width: 26px; height: 35px;
            background: #d4d4d4;
            border-radius: 4px;
            transform: rotate(10deg);
        }

        /* --- CONTROLES --- */
        .controls-left {
            position: absolute;
            bottom: 20px;
            left: 20px;
            display: flex;
            gap: 12px;
            z-index: 20;
        }

        .controls-right {
            position: absolute;
            bottom: 20px;
            right: 20px;
            z-index: 20;
        }

        .btn-control {
            width: 40px; height: 40px;
            background: #fff;
            border-radius: 50%;
            border: none;
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: var(--color-label);
            transition: transform 0.1s, background-color 0.2s;
        }
        
        .btn-play-main {
            width: 50px; height: 50px;
            background: var(--color-label);
            color: white;
            box-shadow: 0 4px 12px rgba(168, 85, 247, 0.4);
        }
        
        .btn-control:active { transform: scale(0.95); }
        .btn-control:hover { background-color: #f3e8ff; }
        .btn-play-main:hover { background-color: #9333ea; }
        
        .is-playing .arm { 
            transform: rotate(3deg); 
            box-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        @keyframes spin { 
            from { transform: translate(-50%, -50%) rotate(0deg); }
            to { transform: translate(-50%, -50%) rotate(360deg); }
        }

        /* --- TARJETA DE PAPEL (Playlist) --- */
        .paper-card {
            background-color: #fffaf0;
            background-image: radial-gradient(#d1d5db 1px, transparent 1px);
            background-size: 20px 20px;
            display: flex;
            flex-direction: column;
            height: 280px; 
            width: 100%;
            position: relative;
            z-index: 20;
        }

        /* --- NUEVO ESTILO NOTA (Post-it) --- */
        .note-card {
            background-color: #fef3c7; /* Amarillo post-it suave */
            background-image: none; /* Quitamos la cuadr√≠cula de la paper-card */
            border-left: 4px solid #f59e0b;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            transform: rotate(-1deg);
            z-index: 20;
        }

        .card-content {
            flex-grow: 1;
            overflow-y: auto;
            padding-right: 4px;
        }

        .card-footer {
            flex-shrink: 0;
            border-top: 1px dashed #e9d5ff;
            padding-top: 8px;
            margin-top: 4px;
            text-align: center;
        }

        .song-item {
            cursor: pointer;
            transition: all 0.2s;
            padding: 6px 10px;
            border-radius: 8px;
            margin-bottom: 4px;
        }
        .song-item:hover { background-color: rgba(168, 85, 247, 0.1); }
        .song-item.active {
            background-color: rgba(168, 85, 247, 0.2);
            font-weight: bold;
            color: #7e22ce;
        }

        .toggle-btn {
            display: inline-block;
            padding: 6px 16px;
            background-color: #f3e8ff;
            color: #9333ea;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid #d8b4fe;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        .toggle-btn:hover { background-color: #e9d5ff; transform: translateY(-1px); }
    </style>
</head>
<body class="bg-gradient-to-br from-purple-200 via-fuchsia-100 to-violet-200 h-[100dvh] w-screen flex justify-center items-center relative overflow-hidden">

    <canvas id="confetti-canvas" class="absolute top-0 left-0 w-full h-full pointer-events-none z-50"></canvas>
    <audio id="audio-player"></audio>

    <!-- PANTALLA 1: LA PREGUNTA -->
    <div id="question-container" class="bg-white/90 backdrop-blur-md p-6 rounded-3xl shadow-2xl text-center max-w-md w-[90%] mx-auto border-4 border-purple-300 z-10 transition-all duration-500 relative flex flex-col items-center">
        
        <!-- TU IMAGEN DE SNOOPY -->
        <!-- Aseg√∫rate de tener el archivo 'sn.jpg' en la misma carpeta -->
        <img src="sn.png" alt="Snoopy con flores" class="mb-6 floating w-40 h-auto drop-shadow-xl rounded-2xl mx-auto object-contain">
        
        <h1 class="text-3xl sm:text-4xl text-purple-600 mb-2 title-font">¬°Hola Abi!</h1>
        <p class="text-gray-600 mb-6 text-lg font-medium">Tengo algo para ti...</p>
        
        <h2 class="text-2xl sm:text-3xl font-bold text-gray-800 mb-8 leading-tight">
            ¬øTe gustar√≠a ser mi<br>
            <span class="text-purple-500 title-font text-4xl">San Valent√≠n?</span>
        </h2>

        <div class="flex flex-col sm:flex-row gap-4 justify-center items-center w-full min-h-[60px] relative">
            <button id="btnYes" class="bg-purple-500 hover:bg-purple-600 text-white font-bold py-3 px-8 rounded-full shadow-lg transform transition hover:scale-105 active:scale-95 text-xl w-32 z-10 border-b-4 border-purple-700">
                ¬°Si! ‚ù§Ô∏è
            </button>
            <button id="btnNo" class="bg-gray-300 hover:bg-gray-400 text-gray-700 font-bold py-3 px-8 rounded-full shadow-lg text-xl w-32 z-20 border-b-4 border-gray-400">
                No
            </button>
        </div>
    </div>

    <!-- PANTALLA 2: √âXITO Y M√öSICA -->
    <!-- CAMBIO: Ahora usamos overflow-y-auto y padding para permitir scroll si las tarjetas no caben -->
    <div id="success-container" class="hidden-page flex-col items-center justify-start overflow-y-auto text-center z-30 w-full h-full absolute top-0 left-0 bg-white/60 backdrop-blur-md pt-10 pb-10">
        
        <div class="w-full max-w-md px-4 flex flex-col items-center justify-center shrink-0">
            
            <h1 class="text-3xl text-purple-600 mb-4 title-font drop-shadow-sm mt-2">Holaaaaaaaaa</h1>
            
            <!-- TOCADISCOS -->
            <div id="player" class="player-wrapper mb-6 transform scale-95 sm:scale-100">
                <div class="turntable">
                    <div id="vinyl-record" class="record">
                        <div class="label">
                            <h2 id="song-artist">Para Abi</h2>
                            <h3 id="song-title">San Valent√≠n</h3>
                        </div>
                        <div class="spindle"></div>
                    </div>
                    
                    <div class="arm-container">
                        <div class="arm-pivot"></div>
                        <div class="arm">
                            <div class="arm-head"></div>
                        </div>
                    </div>

                    <!-- Botones Izquierda -->
                    <div class="controls-left">
                        <button id="btn-prev" class="btn-control" title="Anterior">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" stroke="none"><polygon points="19 20 9 12 19 4 19 20"></polygon><line x1="5" y1="19" x2="5" y2="5" stroke="currentColor" stroke-width="4" stroke-linecap="round"></line></svg>
                        </button>
                        <button id="btn-next" class="btn-control" title="Siguiente">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" stroke="none"><polygon points="5 4 15 12 5 20 5 4"></polygon><line x1="19" y1="5" x2="19" y2="19" stroke="currentColor" stroke-width="4" stroke-linecap="round"></line></svg>
                        </button>
                    </div>

                    <!-- Play Derecha -->
                    <div class="controls-right">
                        <button id="play-switch" class="btn-control btn-play-main" title="Reproducir">
                            <svg id="play-icon" width="22" height="22" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
                            <svg id="pause-icon" class="hidden" width="22" height="22" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;"><rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect></svg>
                        </button>
                    </div>
                </div>
            </div>

            <!-- TARJETA 1: PLAYLIST -->
            <div class="paper-card p-5 rounded-xl shadow-lg border border-purple-100 mb-6 shrink-0">
                
                <!-- HEADER FIJO -->
                <p id="card-title" class="text-xs text-purple-400 font-bold mb-2 text-center uppercase tracking-widest border-b border-purple-200 pb-2 flex-shrink-0">
                    Canciones que me recuerdan a ti
                </p>

                <!-- CONTENIDO SCROLLABLE (Lista y Razones) -->
                <div class="card-content relative">
                    
                    <!-- VISTA 1: LISTA -->
                    <div id="playlist-view" class="fade-in">
                        <ul id="playlist" class="space-y-1 text-gray-600 font-medium text-sm">
                            <!-- JS genera esto -->
                        </ul>

                        <div class="mt-4 text-center">
                            <a href="https://open.spotify.com/playlist/TU_PLAYLIST_ID_AQUI" target="_blank" class="inline-flex items-center gap-2 bg-[#1DB954] hover:bg-[#1ed760] text-white font-bold py-2 px-5 rounded-full text-xs transition-transform hover:scale-105 shadow-md no-underline">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.419 1.56-.299.421-1.02.599-1.559.3z"/></svg>
                                Abrir en Spotify
                            </a>
                        </div>
                    </div>

                    <!-- VISTA 2: RAZONES -->
                     <div id="reasons-view" class="hidden-content fade-in">
                        <div class="text-sm text-gray-700 font-handwritten italic space-y-3 px-1">
                            
                            <p><strong class="text-purple-600 not-italic">Le cont√© a Dios sobre ti:</strong> 
                            Porque eres esa oraci√≥n contestada que guardo en el coraz√≥n, la prueba de que Dios da "toda buena d√°diva y todo don perfecto" (Santiago 1:17).</p>
                            
                            <p><strong class="text-purple-600 not-italic">Flores:</strong> 
                            Porque eres para m√≠ como "el lirio entre los espinos" (Cantares 2:2), resaltas entre todas y quiero cuidar tu coraz√≥n con la misma delicadeza de un jard√≠n.</p>
                            
                            <p><strong class="text-purple-600 not-italic">Bonita:</strong> 
                            Porque eres muy linda, pero lo que m√°s me gusta es tu coraz√≥n (1 Pedro 3:4), esa belleza que llevas dentro es lo que te hace tan valiosa para Dios y para m√≠.</p>
                            
                            <p><strong class="text-purple-600 not-italic">Brillo M√≠o:</strong> 
                            Porque como dice Proverbios 4:18, eres como la "luz de la aurora", tu presencia trae claridad, paz y una alegr√≠a que va en aumento.</p>
                            
                            <p><strong class="text-purple-600 not-italic">M√°s All√°:</strong> 
                            Porque mi anhelo contigo no es algo pasajero, sino construir un "cord√≥n de tres dobleces" (Eclesiast√©s 4:12) contigo y Dios, que no se rompa.</p>
                            
                            <p class="text-center mt-3 text-purple-500 font-bold not-italic">Eres muy especial Abi ‚ù§Ô∏è</p>
                        </div>
                    </div>

                </div>

                <!-- FOOTER FIJO (BOT√ìN TOGGLE) -->
                <div class="card-footer">
                    <button id="toggle-view-btn" class="toggle-btn">
                        üíå ¬øPor qu√© estas canciones?
                    </button>
                </div>

            </div>

            <!-- TARJETA 2: UNA PEQUE√ëA NOTA (ESTILO POST-IT) -->
            <div class="note-card w-full relative z-20 p-5 rounded-xl mb-6 shrink-0 h-auto min-h-[150px] text-left">
                <p class="text-xs text-yellow-700 font-bold mb-2 text-center uppercase tracking-widest border-b border-yellow-200 pb-2">
                    Una peque√±a nota...
                </p>
                <div class="text-sm text-gray-700 font-handwritten px-1 leading-relaxed">
                    <p class="mb-2">Abi,</p>
                    <p class="mb-2">Sabes que me encantar√≠a verte ese d√≠a, pero quiz√° se me complique un poquito por unas actividades del distrito que ya estaban programadas</p>
                    <p class="mb-2">Pero no te preocupes, mi coraz√≥n va a estar ah√≠ contigo! te prometo que aunque no pueda estar en persona, te har√© llegar mi cari√±o de una forma  especial ‚ù§Ô∏è‚ú®</p>
                    <p class="mb-2">Podr√≠a intentar escribirle versos a la luna para describir la belleza, pero me quedar√≠a corto, porque la luna solo brilla cuando el sol la mira, pero t√∫ brillas con una luz propia que Dios puso en tu coraz√≥n</p>
                    <p class="text-right font-bold text-yellow-600 mt-2">- Moyc:</p>
                </div>
            </div>
            
        </div>
    </div>

    <script>
        // --- SELECCI√ìN FINAL DE 5 CANCIONES ---
        // IMPORTANTE: Aseg√∫rate de que los archivos en tu carpeta tengan estos nombres exactos (sin espacios)
        const songs = [
            { title: "Le cont√© a Dios sobre ti", artist: "Jos√≠as Onoto", url:  "Le_cont√©_a_Dios_sobre_ti_Vals_Jos√≠as Onoto.mp3" },
            { title: "Flores", artist: "Sebasti√°n Romero", url: "Flores_Sebasti√°n_Romero.mp3" },
            { title: "Bonita", artist: "Darviin", url: "Bonita_Darviin.mp3" },
            { title: "Brillo M√≠o", artist: "Caloncho", url: "Brillo_Mio_Caloncho.mp3" },
            { title: "M√°s All√°", artist: "Manuel Medrano", url: "M√°s_All√°_Manuel_Medrano.mp3" }
        ];

        const btnNo = document.getElementById('btnNo');
        const btnYes = document.getElementById('btnYes');
        const questionContainer = document.getElementById('question-container');
        const successContainer = document.getElementById('success-container');
        const player = document.getElementById('player');
        const playSwitch = document.getElementById('play-switch');
        const btnPrev = document.getElementById('btn-prev');
        const btnNext = document.getElementById('btn-next');
        const audioPlayer = document.getElementById('audio-player');
        const songTitleLabel = document.getElementById('song-title');
        const songArtistLabel = document.getElementById('song-artist');
        const playlistElement = document.getElementById('playlist');
        const playIcon = document.getElementById('play-icon');
        const pauseIcon = document.getElementById('pause-icon');
        const vinylRecord = document.getElementById('vinyl-record');
        
        const playlistView = document.getElementById('playlist-view');
        const reasonsView = document.getElementById('reasons-view');
        const toggleBtn = document.getElementById('toggle-view-btn');
        const cardTitle = document.getElementById('card-title');

        let isPlaying = false;
        let currentSongIndex = 0;
        let showingReasons = false;

        toggleBtn.addEventListener('click', () => {
            showingReasons = !showingReasons;
            if (showingReasons) {
                playlistView.classList.add('hidden-content');
                reasonsView.classList.remove('hidden-content');
                toggleBtn.textContent = "üéµ Volver a la lista";
                cardTitle.textContent = "¬øPor qu√© estas canciones?";
            } else {
                reasonsView.classList.add('hidden-content');
                playlistView.classList.remove('hidden-content');
                toggleBtn.textContent = "üíå ¬øPor qu√© estas canciones?";
                cardTitle.textContent = "Canciones que me recuerdan a ti";
            }
        });

        function initPlaylist() {
            playlistElement.innerHTML = '';
            songs.forEach((song, index) => {
                const li = document.createElement('li');
                li.className = 'song-item flex items-center gap-2';
                li.innerHTML = `
                    <span class="text-purple-400 text-xs font-mono">${String(index + 1).padStart(2, '0')}</span>
                    <div class="flex-1 truncate">
                        <span class="font-semibold text-gray-700">${song.title}</span>
                        <span class="text-xs text-gray-400 ml-1">- ${song.artist}</span>
                    </div>
                `;
                li.onclick = () => loadAndPlaySong(index);
                playlistElement.appendChild(li);
            });
        }

        function loadSong(index) {
            currentSongIndex = index;
            const song = songs[index];
            songTitleLabel.textContent = song.title;
            songArtistLabel.textContent = song.artist;
            audioPlayer.src = song.url;
            
            const items = document.querySelectorAll('.song-item');
            items.forEach(item => item.classList.remove('active'));
            if(items[index]) items[index].classList.add('active');
        }

        function playAudio() {
            audioPlayer.play().then(() => {
                isPlaying = true;
                player.classList.add('is-playing');
                vinylRecord.classList.add('spinning');
                vinylRecord.style.animationPlayState = 'running';
                playIcon.style.display = 'none';
                pauseIcon.style.display = 'block';
            }).catch(e => console.log("Esperando interacci√≥n"));
        }

        function pauseAudio() {
            audioPlayer.pause();
            isPlaying = false;
            player.classList.remove('is-playing');
            vinylRecord.style.animationPlayState = 'paused';
            playIcon.style.display = 'block';
            pauseIcon.style.display = 'none';
        }

        function togglePlay() {
            if (isPlaying) pauseAudio();
            else playAudio();
        }

        function loadAndPlaySong(index) {
            loadSong(index);
            playAudio();
        }

        function prevSong() {
            let newIndex = currentSongIndex - 1;
            if (newIndex < 0) newIndex = songs.length - 1;
            loadAndPlaySong(newIndex);
        }

        function nextSong() {
            let newIndex = (currentSongIndex + 1) % songs.length;
            loadAndPlaySong(newIndex);
        }

        audioPlayer.addEventListener('ended', nextSong);
        playSwitch.addEventListener('click', togglePlay);
        btnPrev.addEventListener('click', prevSong);
        btnNext.addEventListener('click', nextSong);

        // L√≥gica "No" Escurridizo
        function moveButton() {
            btnNo.style.width = '100px'; 
            btnNo.style.position = 'fixed'; 
            const margin = 20; 
            const windowWidth = window.innerWidth - margin * 2;
            const windowHeight = window.innerHeight - margin * 2;
            const newX = Math.max(margin, Math.random() * (windowWidth - 100)); 
            const newY = Math.max(margin, Math.random() * (windowHeight - 50)); 
            btnNo.style.left = newX + 'px';
            btnNo.style.top = newY + 'px';
            btnNo.style.zIndex = '9999'; 
        }

        btnNo.addEventListener('mouseover', moveButton);
        btnNo.addEventListener('touchstart', (e) => { e.preventDefault(); moveButton(); }, { passive: false });

        btnYes.addEventListener('click', () => {
            questionContainer.style.display = 'none';
            btnNo.style.display = 'none';
            successContainer.classList.remove('hidden-page');
            successContainer.classList.add('visible-page');
            startConfetti();
            loadSong(0);
            playAudio(); // Se a√±ade autoplay al confirmar
        });

        initPlaylist();

        // Confetti
        const canvas = document.getElementById('confetti-canvas');
        const ctx = canvas.getContext('2d');
        let particles = [];
        
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        function createParticle() {
            const colors = ['#9333ea', '#c084fc', '#e879f9', '#ffffff'];
            return {
                x: Math.random() * canvas.width,
                y: -20,
                color: colors[Math.floor(Math.random() * colors.length)],
                size: Math.random() * 8 + 4, 
                speedY: Math.random() * 3 + 2,
                speedX: Math.random() * 4 - 2,
                rotation: Math.random() * 360,
                rotationSpeed: Math.random() * 10 - 5
            };
        }

        function updateParticles() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            if (particles.length < 100) particles.push(createParticle());
            for (let i = 0; i < particles.length; i++) {
                const p = particles[i];
                p.y += p.speedY;
                p.x += p.speedX;
                p.rotation += p.rotationSpeed;
                ctx.save();
                ctx.translate(p.x, p.y);
                ctx.rotate(p.rotation * Math.PI / 180);
                ctx.fillStyle = p.color;
                ctx.beginPath();
                ctx.arc(0, 0, p.size / 2, 0, Math.PI * 2);
                ctx.fill();
                ctx.restore();
                if (p.y > canvas.height) particles[i] = createParticle();
            }
            requestAnimationFrame(updateParticles);
        }

        function startConfetti() { updateParticles(); }
    </script>
</body>
</html>